#define ROW 3
#define COL 3

#include <stdio.h>
#include <stdlib.h>
#include <time.h>
extern char crr1[ROW][COL];


/////////////////////初始界面////////////////////
void game1window1()
{
	printf("\t\t\t\t\t###################################\n");
	printf("\t\t\t\t\t###################################\n");
	printf("\t\t\t\t\t#########1.Play    2.Exit##########\n");
	printf("\t\t\t\t\t###################################\n");
	printf("\t\t\t\t\t###################################\n");
	printf("\t\t\t请输入>>>:");
}
/////////////////////选择界面///////////////////////
void game1window2()
{
	printf("\t\t\t\t#############################################################\n");
	printf("\t\t\t\t#############################################################\n");
	printf("\t\t\t\t########1.Player1 VS Player2    2.Player1 VS Competer########\n");
	printf("\t\t\t\t#############################################################\n");
	printf("\t\t\t\t#############################################################\n");
	printf("\t\t\t请选择模式>>>:");

}
////////////////////////井字棋/////////////////////
void qipan()
{
	int i=0;
	//////////////////////打印棋盘//////////////////////////
	for(i=0;i<ROW;i++)
	{
		int j=0;
          //////////1.打印每一行//////////////
		printf("\t\t\t\t\t  ");
		for(j=0;j<COL;j++)
		{
			printf(" %c ",crr1[i][j]);
			if(j<COL-1) printf("|");
		}
		putchar('\n');
          //////////2.打印分割线///////////////
		if(i+1>=10) printf("\t\t\t\t\t%d",i+1);
		else printf("\t\t\t\t\t%d ",i+1);
		if(i<ROW-1)
		{
			for(j=0;j<COL;j++)
			{
				if(j<COL-1) printf("___|");
				if(j==COL-1) printf("___");
			}
			putchar('\n');
		}
		if(i==ROW-1) {for(j=0;j<COL-1;j++) printf("   |");putchar('\n');}		
	}
///////////////////////打印棋盘结束//////////////////////////////////////
}
//////////////////////双人对战//////////////////////////////////////////
void game1()
{
	printf("\n\n\n");
	int i=0;
    qipan();
	while(1)
	{
		while(1)
		{
			int x=0; int y=0;
			printf("轮到Player1走棋\n");
			printf("请输入要下的坐标>>>:");
			scanf("%d%d",&x,&y);
			if(((x<1) || (x>ROW)) || ((y<1) || (y>COL))==1){printf("请输入正确的坐标\n");continue;}
			else if((crr1[x-1][y-1]=='X') || (crr1[x-1][y-1]=='O')) {printf("该位置已被下过,请重新输入\n");continue;}
			else {system("cls");crr1[x-1][y-1]='X';qipan();break;}
		}
		if((crr1[0][0]=='X' && crr1[0][1]=='X' && crr1[0][2]=='X') || (crr1[1][0]=='X' && crr1[1][1]=='X' && crr1[1][2]=='X') || (crr1[2][0]=='X' && crr1[2][1]=='X' && crr1[2][2]=='X')
			|| (crr1[0][0]=='X' && crr1[1][0]=='X' && crr1[2][0]=='X') || (crr1[0][1]=='X' && crr1[1][1]=='X' && crr1[2][1]=='X') || (crr1[0][2]=='X' && crr1[1][2]=='X' && crr1[02][2]=='X')
			|| (crr1[0][0]=='X' && crr1[1][1]=='X' && crr1[2][2]=='X') || (crr1[0][2]=='X' && crr1[1][1]=='X' && crr1[2][0]=='X')==1)
		{printf("Player1获胜,游戏结束\n");break;}
		
		while(1)
		{
			int x=0; int y=0;
			printf("轮到Player2走棋\n");
			printf("请输入要下的坐标>>>:");
			scanf("%d%d",&x,&y);
			if(((x<1) || (x>ROW)) || ((y<1) || (y>COL))==1) {printf("请输入正确的坐标");continue;}
			else if((crr1[x-1][y-1]=='X') || (crr1[x-1][y-1]=='O')) {printf("该位置已被下过");continue;}
			else {system("cls");crr1[x-1][y-1]='O';qipan();break;}
		}
		if((crr1[0][0]=='O' && crr1[0][1]=='O' && crr1[0][2]=='O') || (crr1[1][0]=='O' && crr1[1][1]=='O' && crr1[1][2]=='O') || (crr1[2][0]=='O' && crr1[2][1]=='O' && crr1[2][2]=='O')
			|| (crr1[0][0]=='O' && crr1[1][0]=='O' && crr1[2][0]=='O') || (crr1[0][1]=='O' && crr1[1][1]=='O' && crr1[2][1]=='O') || (crr1[0][2]=='O' && crr1[1][2]=='O' && crr1[02][2]=='O')
			|| (crr1[0][0]=='O' && crr1[1][1]=='O' && crr1[2][2]=='O') || (crr1[0][2]=='O' && crr1[1][1]=='O' && crr1[2][0]=='O')==1)
		{printf("Player2获胜,游戏结束\n");break;}
		
	}
}
///////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////人机对战////////////////////////////////////////////////////
void game2()
{
	printf("\n\n\n");
	int i=0;
    qipan();
	while(1)
	{
		while(1)
		{
			int x=0; int y=0;
			printf("轮到Player1走棋\n");
			printf("请输入要下的坐标>>>:");
			scanf("%d%d",&x,&y);
			if(((x<1) || (x>ROW)) || ((y<1) || (y>COL))==1){printf("请输入正确的坐标\n");continue;}
			else if((crr1[x-1][y-1]=='X') || (crr1[x-1][y-1]=='O')) {printf("该位置已被下过,请重新输入\n");continue;}
			else {system("cls");crr1[x-1][y-1]='X';qipan();break;}
		}
		if((crr1[0][0]=='X' && crr1[0][1]=='X' && crr1[0][2]=='X') || (crr1[1][0]=='X' && crr1[1][1]=='X' && crr1[1][2]=='X') || (crr1[2][0]=='X' && crr1[2][1]=='X' && crr1[2][2]=='X')
			|| (crr1[0][0]=='X' && crr1[1][0]=='X' && crr1[2][0]=='X') || (crr1[0][1]=='X' && crr1[1][1]=='X' && crr1[2][1]=='X') || (crr1[0][2]=='X' && crr1[1][2]=='X' && crr1[02][2]=='X')
			|| (crr1[0][0]=='X' && crr1[1][1]=='X' && crr1[2][2]=='X') || (crr1[0][2]=='X' && crr1[1][1]=='X' && crr1[2][0]=='X')==1)
		{printf("Player1获胜,游戏结束\n");break;}
		printf("轮到电脑走棋\n");
		int x=0; int y=0;
		x=rand()%ROW;
		y=rand()%COL;
		while(1)
		{
			int x=0; int y=0;
			x=rand()%ROW;
			y=rand()%COL;
			if(crr1[x][y]==' ') {crr1[x][y]='O';qipan();break;}
		}
		if((crr1[0][0]=='O' && crr1[0][1]=='O' && crr1[0][2]=='O') || (crr1[1][0]=='O' && crr1[1][1]=='O' && crr1[1][2]=='O') || (crr1[2][0]=='O' && crr1[2][1]=='O' && crr1[2][2]=='O')
			|| (crr1[0][0]=='O' && crr1[1][0]=='O' && crr1[2][0]=='O') || (crr1[0][1]=='O' && crr1[1][1]=='O' && crr1[2][1]=='O') || (crr1[0][2]=='O' && crr1[1][2]=='O' && crr1[02][2]=='O')
			|| (crr1[0][0]=='O' && crr1[1][1]=='O' && crr1[2][2]=='O') || (crr1[0][2]=='O' && crr1[1][1]=='O' && crr1[2][0]=='O')==1)
		{printf("电脑获胜,游戏结束\n");break;}
		
		
	}
}

char crr1[ROW][COL]={0};
void Init(char crr1[ROW][COL],int row,int col)
{
	int i=0;int j=0;
	for(i=0;i<row;i++)
	{
		for(j=0;j<col;j++)
			crr1[i][j]=' ';
	}
}


int main()
{
/////////////////////所需变量定义区////////////////////////
	int a=0;  //a=1,Play  a=2,Exit
	int b=0;  //b=1,井字棋   b=2,扫雷
	int c=0;  //c=1,双人对战  c=2,人机对战
	int i=0; int j=0;
	Init(crr1,ROW,COL);
///////////////////////////////////////////////////////////
//////////////////////初始界面/////////////////////////////
	game1window1();
	scanf("%d",&a);

	if(a==1)
	{
		system("cls");
		printf("\t\t\t\t\t####################################\n");
		printf("\t\t\t\t\t####################################\n");
		printf("\t\t\t\t\t#########1.井字棋   2.扫雷##########\n");
		printf("\t\t\t\t\t####################################\n");
		printf("\t\t\t\t\t####################################\n");
		printf("\t\t\t请选择游戏>>>:");
		scanf("%d",&b);
		system("cls");
/////////////////////////////////////////////////////
////////////////////////井字棋///////////////////////
		if(b==1)
		{
			
			game1window2();
			scanf("%d",&c);
			system("cls");
			if(c==1) game1();
			if(c==2) game2();
		}
//////////////////////////////////////////////////////
	}
////////////////////////退出界面///////////////////////
	else 
	{
		system("cls");
		printf("\t\t\t\t\t###################################\n");
		printf("\t\t\t\t\t###################################\n");
		printf("\t\t\t\t\t#############退出游戏##############\n");
		printf("\t\t\t\t\t###################################\n");
		printf("\t\t\t\t\t###################################\n");

	}






	return 0;

}
